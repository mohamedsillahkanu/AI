<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mohamed's AI Assistant</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }

        .chat-container {
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            width: 100%;
            max-width: 800px;
            height: 600px;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        .chat-header {
            background: linear-gradient(45deg, #4CAF50, #45a049);
            color: white;
            padding: 20px;
            text-align: center;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            position: relative;
        }

        .voice-controls {
            position: absolute;
            top: 20px;
            right: 20px;
            display: flex;
            gap: 10px;
        }

        .voice-btn {
            background: rgba(255,255,255,0.2);
            border: 1px solid rgba(255,255,255,0.3);
            color: white;
            padding: 8px 12px;
            border-radius: 20px;
            cursor: pointer;
            font-size: 12px;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .voice-btn:hover {
            background: rgba(255,255,255,0.3);
        }

        .voice-btn.active {
            background: rgba(255,255,255,0.9);
            color: #4CAF50;
        }

        .speaking-indicator {
            position: absolute;
            top: 5px;
            right: 5px;
            width: 10px;
            height: 10px;
            background: #ff4444;
            border-radius: 50%;
            animation: pulse 1s infinite;
            display: none;
        }

        @keyframes pulse {
            0% { transform: scale(1); opacity: 1; }
            50% { transform: scale(1.2); opacity: 0.7; }
            100% { transform: scale(1); opacity: 1; }
        }

        .chat-header h1 {
            font-size: 24px;
            margin-bottom: 5px;
        }

        .chat-header p {
            opacity: 0.9;
            font-size: 14px;
        }

        .chat-messages {
            flex: 1;
            padding: 20px;
            overflow-y: auto;
            background: #f8f9fa;
        }

        .message {
            margin-bottom: 15px;
            animation: fadeIn 0.5s ease-in;
        }

        .message.ai {
            text-align: left;
        }

        .message.user {
            text-align: right;
        }

        .message-bubble {
            display: inline-block;
            padding: 12px 18px;
            border-radius: 18px;
            max-width: 70%;
            word-wrap: break-word;
        }

        .message.ai .message-bubble {
            background: #e3f2fd;
            color: #1565c0;
            border-bottom-left-radius: 5px;
        }

        .message.user .message-bubble {
            background: #4CAF50;
            color: white;
            border-bottom-right-radius: 5px;
        }

        .chat-input {
            padding: 20px;
            background: white;
            border-top: 1px solid #eee;
            display: flex;
            gap: 10px;
        }

        .chat-input input {
            flex: 1;
            padding: 12px 16px;
            border: 2px solid #ddd;
            border-radius: 25px;
            outline: none;
            font-size: 16px;
            transition: border-color 0.3s;
        }

        .chat-input input:focus {
            border-color: #4CAF50;
        }

        .chat-input button {
            padding: 12px 24px;
            background: #4CAF50;
            color: white;
            border: none;
            border-radius: 25px;
            cursor: pointer;
            font-size: 16px;
            transition: background 0.3s;
        }

        .chat-input button:hover {
            background: #45a049;
        }

        .quick-actions {
            padding: 15px 20px;
            background: #f1f3f4;
            border-top: 1px solid #eee;
        }

        .quick-actions h4 {
            margin-bottom: 10px;
            color: #333;
            font-size: 14px;
        }

        .action-buttons {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
        }

        .action-btn {
            padding: 8px 16px;
            background: white;
            border: 1px solid #ddd;
            border-radius: 20px;
            cursor: pointer;
            font-size: 12px;
            transition: all 0.3s;
        }

        .action-btn:hover {
            background: #4CAF50;
            color: white;
            border-color: #4CAF50;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .typing-indicator {
            display: none;
            align-items: center;
            gap: 5px;
            margin-bottom: 15px;
        }

        .typing-dots {
            display: flex;
            gap: 3px;
        }

        .typing-dots span {
            width: 8px;
            height: 8px;
            background: #4CAF50;
            border-radius: 50%;
            animation: typing 1.4s infinite ease-in-out;
        }

        .typing-dots span:nth-child(1) { animation-delay: -0.32s; }
        .typing-dots span:nth-child(2) { animation-delay: -0.16s; }

        @keyframes typing {
            0%, 80%, 100% { transform: scale(0); }
            40% { transform: scale(1); }
        }
    </style>
</head>
<body>
    <div class="chat-container">
        <div class="chat-header">
            <div class="voice-controls">
                <button class="voice-btn active" id="voiceToggle" onclick="safeToggleVoice()">
                    üîä <span id="voiceStatus">Voice ON</span>
                </button>
                <button class="voice-btn" onclick="safeStopSpeaking()">‚èπÔ∏è Stop</button>
            </div>
            <h1>üëã Mohamed's AI Assistant</h1>
            <p>Data Science ‚Ä¢ Public Health ‚Ä¢ Software Engineering</p>
            <div class="speaking-indicator" id="speakingIndicator"></div>
        </div>
        
        <div class="chat-messages" id="chatMessages">
            <div class="message ai">
                <div class="message-bubble">
                    Hello! I'm Mohamed's AI assistant. I'm here to tell you about Mohamed Sillah Kanu - a talented Data Scientist, Statistician, and Software Engineer currently working at Northwestern University's Feinberg School of Medicine. 
                    <br><br>
                    Mohamed specializes in malaria epidemiology, predictive modeling, and has extensive experience with National Malaria Programs in Africa. He holds an MS in Data Science from George Washington University and an MS in Statistics from University of Sierra Leone.
                    <br><br>
                    How can I help you learn more about Mohamed today? ü§î
                </div>
            </div>
        </div>

        <div class="typing-indicator" id="typingIndicator">
            <div class="message-bubble">
                <div class="typing-dots">
                    <span></span>
                    <span></span>
                    <span></span>
                </div>
            </div>
        </div>

        <div class="quick-actions">
            <h4>Quick Questions:</h4>
            <div class="action-buttons">
                <div class="action-btn" onclick="safeQuickMessage('Tell me about his education')">üéì Education</div>
                <div class="action-btn" onclick="safeQuickMessage('What is his current role?')">üíº Current Work</div>
                <div class="action-btn" onclick="safeQuickMessage('Show me his technical skills')">üíª Technical Skills</div>
                <div class="action-btn" onclick="safeQuickMessage('What are his research interests?')">üî¨ Research</div>
                <div class="action-btn" onclick="safeQuickMessage('Tell me about his publications')">üìö Publications</div>
                <div class="action-btn" onclick="safeQuickMessage('How can I contact him?')">üìß Contact</div>
            </div>
        </div>

        <div class="chat-input">
            <input type="text" id="userInput" placeholder="Ask me anything about Mohamed..." onkeypress="safeHandleKeyPress(event)">
            <button onclick="safeSendMessage()">Send</button>
        </div>
    </div>

    <script>
        // Global state management
        let isInitialized = false;
        let voiceEnabled = true;
        let currentSpeech = null;

        // Safe element getter with error handling
        function safeGetElement(id) {
            try {
                return document.getElementById(id);
            } catch (error) {
                console.warn(`Element ${id} not found:`, error);
                return null;
            }
        }

        // Safe style setter
        function safeSetStyle(elementId, property, value) {
            try {
                const element = safeGetElement(elementId);
                if (element && element.style) {
                    element.style[property] = value;
                    return true;
                }
            } catch (error) {
                console.warn(`Style setting failed for ${elementId}:`, error);
            }
            return false;
        }

        // Safe class management
        function safeAddClass(elementId, className) {
            try {
                const element = safeGetElement(elementId);
                if (element && element.classList) {
                    element.classList.add(className);
                    return true;
                }
            } catch (error) {
                console.warn(`Class add failed for ${elementId}:`, error);
            }
            return false;
        }

        function safeRemoveClass(elementId, className) {
            try {
                const element = safeGetElement(elementId);
                if (element && element.classList) {
                    element.classList.remove(className);
                    return true;
                }
            } catch (error) {
                console.warn(`Class remove failed for ${elementId}:`, error);
            }
            return false;
        }

        // Mohamed's information database
        const mohamedInfo = {
            education: "üéì **Mohamed's Educational Background:**\n\n‚Ä¢ **MS Data Science** - The George Washington University (2024)\n‚Ä¢ **MS Statistics** - University of Sierra Leone (2023)\n‚Ä¢ **BSc Software Engineering** - Limkokwing University (2020)\n‚Ä¢ **BSc Mathematics & Statistics** - University of Sierra Leone (2020)\n\nHe has a unique interdisciplinary background combining statistics, data science, and software engineering!",
            
            work: "üíº **Current Position:**\n\nMohamed is a **Research Data Analyst Associate** at Northwestern University's Feinberg School of Medicine (2024-Present). He collaborates with National Malaria Programs in Africa, leveraging advanced data analytics for epidemiology and public health research.\n\n**Previous roles include:**\n‚Ä¢ CEO - Informatics Consultancy Firm\n‚Ä¢ Malaria Epidemiologist - WHO Sierra Leone\n‚Ä¢ Technical Assistant - Catholic Relief Services\n‚Ä¢ Software Developer - Various organizations",
            
            skills: "üíª **Technical Skills:**\n\n**Programming:** Python, R, JavaScript, Java, C++, HTML5, CSS\n\n**Data Science:** Machine Learning, Statistical Analysis, Data Visualization, Predictive Modeling, Deep Learning\n\n**Databases:** SQL, MySQL, MongoDB, Neo4j\n\n**Cloud:** AWS, Azure\n\n**Specialized:** Streamlit, Shiny, GIS applications, Time Series Analysis",
            
            research: "üî¨ **Research Interests:**\n\n‚Ä¢ Infectious Disease Modeling\n‚Ä¢ Machine Learning in Healthcare\n‚Ä¢ Cancer Prediction Models\n‚Ä¢ Statistical Computation\n‚Ä¢ Health Equity Analytics\n‚Ä¢ GIS for Public Health\n‚Ä¢ Wildfire Behavior Modeling\n‚Ä¢ ML Algorithms in Fraud Detection\n\nHis work focuses on applying advanced analytics to solve real-world public health challenges!",
            
            publications: "üìö **Publications in Progress:**\n\n1. Predictive Modeling of Diabetes in the US using Machine Learning\n2. Using routine malaria surveillance data for stratification in West African countries\n3. Interrupted Time Series Analysis of malaria interventions in Sierra Leone\n4. Time Series Analysis on Walmart Weekly Sales Data\n\nHe's also a member of ASTMH, AMMnet, and other professional organizations.",
            
            contact: "üìß **Contact Information:**\n\n‚Ä¢ **Email:** sillahmohamedkanu@gmail.com\n‚Ä¢ **Phone:** +1 240-889-6759\n‚Ä¢ **Portfolio:** mohamedsillahkanu.github.io/portfolio\n‚Ä¢ **Location:** Chicago, IL (Northwestern University)\n\nFeel free to reach out for collaborations, consultations, or research opportunities!",
            
            achievements: "üèÜ **Key Achievements:**\n\n‚Ä¢ Led digitalization of Sierra Leone's first ITN Mass Campaign (98% national coverage)\n‚Ä¢ Developed web portal for National Malaria Control Program\n‚Ä¢ Contributed to reducing malaria prevalence from 40% to 22%\n‚Ä¢ Optimized Seasonal Malaria Chemoprevention targeting in Ivory Coast\n‚Ä¢ Multiple certifications from IBM, Google, and deeplearning.ai",
            
            malaria: "ü¶ü **Mohamed's Malaria Research:**\n\nMohamed is a leading expert in malaria epidemiology! He works with National Malaria Programs across Africa, has contributed to reducing malaria burden, and specializes in:\n\n‚Ä¢ Seasonal Malaria Chemoprevention optimization\n‚Ä¢ Surveillance data analysis\n‚Ä¢ ITN campaign digitalization\n‚Ä¢ Intervention effectiveness modeling\n\nHis work has real-world impact in fighting malaria! üåç"
        };

        // Safe speech function
        function safeSpeak(text) {
            if (!voiceEnabled || !text) return;
            
            try {
                safeStopSpeaking();
                
                if ('speechSynthesis' in window) {
                    const cleanText = text
                        .replace(/\*\*(.*?)\*\*/g, '$1')
                        .replace(/\n/g, ' ')
                        .replace(/‚Ä¢/g, '')
                        .replace(/üéì|üíº|üíª|üî¨|üìö|üìß|üèÜ|ü¶ü|üåç|üëã|ü§î|‚èπÔ∏è|üîä/g, '')
                        .replace(/\s+/g, ' ')
                        .trim();

                    if (cleanText) {
                        currentSpeech = new SpeechSynthesisUtterance(cleanText);
                        currentSpeech.rate = 0.9;
                        currentSpeech.pitch = 1;
                        currentSpeech.volume = 0.8;

                        currentSpeech.onstart = () => safeSetStyle('speakingIndicator', 'display', 'block');
                        currentSpeech.onend = () => {
                            safeSetStyle('speakingIndicator', 'display', 'none');
                            currentSpeech = null;
                        };
                        currentSpeech.onerror = () => {
                            safeSetStyle('speakingIndicator', 'display', 'none');
                            currentSpeech = null;
                        };

                        speechSynthesis.speak(currentSpeech);
                    }
                }
            } catch (error) {
                console.warn('Speech failed:', error);
            }
        }

        function safeStopSpeaking() {
            try {
                if (typeof speechSynthesis !== 'undefined' && speechSynthesis.speaking) {
                    speechSynthesis.cancel();
                }
                safeSetStyle('speakingIndicator', 'display', 'none');
                currentSpeech = null;
            } catch (error) {
                console.warn('Stop speaking failed:', error);
            }
        }

        function safeToggleVoice() {
            try {
                voiceEnabled = !voiceEnabled;
                const voiceStatus = safeGetElement('voiceStatus');
                
                if (voiceEnabled) {
                    if (voiceStatus) voiceStatus.textContent = 'Voice ON';
                    safeAddClass('voiceToggle', 'active');
                } else {
                    if (voiceStatus) voiceStatus.textContent = 'Voice OFF';
                    safeRemoveClass('voiceToggle', 'active');
                    safeStopSpeaking();
                }
            } catch (error) {
                console.warn('Toggle voice failed:', error);
            }
        }

        function safeAddMessage(content, isUser = false) {
            try {
                const messagesContainer = safeGetElement('chatMessages');
                if (!messagesContainer) return;

                const messageDiv = document.createElement('div');
                messageDiv.className = `message ${isUser ? 'user' : 'ai'}`;
                
                const bubbleDiv = document.createElement('div');
                bubbleDiv.className = 'message-bubble';
                
                if (!isUser) {
                    const formattedContent = content
                        .replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>')
                        .replace(/\n/g, '<br>');
                    bubbleDiv.innerHTML = formattedContent;
                    safeSpeak(content);
                } else {
                    bubbleDiv.innerHTML = content;
                }
                
                messageDiv.appendChild(bubbleDiv);
                messagesContainer.appendChild(messageDiv);
                messagesContainer.scrollTop = messagesContainer.scrollHeight;
            } catch (error) {
                console.warn('Add message failed:', error);
            }
        }

        function safeShowTyping() {
            safeSetStyle('typingIndicator', 'display', 'flex');
            const messagesContainer = safeGetElement('chatMessages');
            if (messagesContainer) {
                messagesContainer.scrollTop = messagesContainer.scrollHeight;
            }
        }

        function safeHideTyping() {
            safeSetStyle('typingIndicator', 'display', 'none');
        }

        function getAIResponse(userMessage) {
            const message = userMessage.toLowerCase();
            
            if (message.includes('education') || message.includes('degree') || message.includes('university') || message.includes('study')) {
                return mohamedInfo.education;
            }
            if (message.includes('work') || message.includes('job') || message.includes('position') || message.includes('role') || message.includes('northwestern')) {
                return mohamedInfo.work;
            }
            if (message.includes('skill') || message.includes('programming') || message.includes('technical') || message.includes('technology')) {
                return mohamedInfo.skills;
            }
            if (message.includes('research') || message.includes('interest') || message.includes('focus')) {
                return mohamedInfo.research;
            }
            if (message.includes('publication') || message.includes('paper') || message.includes('article')) {
                return mohamedInfo.publications;
            }
            if (message.includes('contact') || message.includes('email') || message.includes('phone') || message.includes('reach')) {
                return mohamedInfo.contact;
            }
            if (message.includes('achievement') || message.includes('accomplishment') || message.includes('success')) {
                return mohamedInfo.achievements;
            }
            if (message.includes('malaria')) {
                return mohamedInfo.malaria;
            }
            if (message.includes('hello') || message.includes('hi') || message.includes('hey')) {
                return "Hello! üëã I'm here to help you learn about Mohamed Sillah Kanu. You can ask me about his education, work experience, technical skills, research interests, or anything else you'd like to know!";
            }
            
            return "I'd be happy to help you learn more about Mohamed! You can ask me about:\n\n‚Ä¢ His educational background\n‚Ä¢ Current work at Northwestern University\n‚Ä¢ Technical skills and expertise\n‚Ä¢ Research interests and publications\n‚Ä¢ Contact information\n‚Ä¢ His achievements in malaria research\n\nWhat would you like to know? ü§î";
        }

        function safeSendMessage() {
            try {
                const input = safeGetElement('userInput');
                if (!input) return;
                
                const message = input.value.trim();
                if (message === '') return;
                
                safeAddMessage(message, true);
                input.value = '';
                
                safeShowTyping();
                
                setTimeout(() => {
                    safeHideTyping();
                    const response = getAIResponse(message);
                    safeAddMessage(response, false);
                }, 1000 + Math.random() * 1000);
            } catch (error) {
                console.warn('Send message failed:', error);
            }
        }

        function safeQuickMessage(message) {
            try {
                const input = safeGetElement('userInput');
                if (input) {
                    input.value = message;
                    safeSendMessage();
                }
            } catch (error) {
                console.warn('Quick message failed:', error);
            }
        }

        function safeHandleKeyPress(event) {
            try {
                if (event.key === 'Enter') {
                    safeSendMessage();
                }
            } catch (error) {
                console.warn('Key press failed:', error);
            }
        }

        // Robust initialization
        function initializeApp() {
            if (isInitialized) return;
            
            try {
                // Focus input
                const userInput = safeGetElement('userInput');
                if (userInput) {
                    userInput.focus();
                }

                // Initialize speech
                if ('speechSynthesis' in window) {
                    speechSynthesis.getVoices();
                    speechSynthesis.addEventListener('voiceschanged', () => {
                        speechSynthesis.getVoices();
                    });
                }

                // Welcome message
                setTimeout(() => {
                    const welcomeText = "Hello! I'm Mohamed's AI assistant. I'm here to tell you about Mohamed Sillah Kanu, a talented Data Scientist, Statistician, and Software Engineer. How can I help you learn more about Mohamed today?";
                    safeSpeak(welcomeText);
                }, 2000);

                isInitialized = true;
            } catch (error) {
                console.warn('Initialization failed:', error);
            }
        }

        // Multiple initialization attempts
        document.addEventListener('DOMContentLoaded', initializeApp);
        window.addEventListener('load', initializeApp);
        
        // Fallback initialization
        setTimeout(initializeApp, 1000);
        setTimeout(initializeApp, 3000);
    </script>
</body>
</html>
